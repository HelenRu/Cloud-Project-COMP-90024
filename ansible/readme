Ansible & Deployment Guide

Ansible is a powerful script to control the cloud and instances. We used Ansible to create and deploy instance automatically. (However, there are still several steps that must be done by user.) There is a video to demonstrate how this work and the YouTube link is in the Appendix. 
 
There are two automatic part of the deployment which finished the most works. To start the “Create Instance” part, user can run the ‘run-nectar.sh’ in the createInstance directory. Then Ansible will set the flavor, image, security group(ssh, http, and port 5984/5985 will be allowed to use couchdb and our harverster.) and others essential information and create new instances. After that, we can get the new IP addressed on the research cloud website. The next step is finished by user to record these IP addressed to a hosts file and decide which one will be the couchdb server or tweet harvester. Don’t forget to copy new hosts to \ansible\deploy\roles\scripts\files because the python script should know it at the same time.

The second part will deploy couchdb and python file for the harvesting. For couchdb, the process is a little complicated because it cannot be installed via single apt-get and configuring is hard too. The ansible modified /opt/couchdb/etc/local.ini to set admin and the internet connection of couchdb, then restart it to commit the new configuration. Then the couchdb will runs continuously. For others harvesters, Ansible will copy the .py script and cities.json for running the harvesting. Finally, user can use ssh to connect these harvester and go to the python directory and use command line to start harvesting. Then the front page can read data dynamically from our couchdb server.
